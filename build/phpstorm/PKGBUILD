pkgname=phpstorm
pkgver=2016.3
pkgrel=1
pkgdesc="PhpStorm"
arch=("i686" "x86_64")
backup=("opt/phpstorm/bin/idea.properties")
options=(!strip)
url="http://www.jetbrains.com/phpstorm/"
license=(custom)
depends=("java-environment>=8" "java-runtime-common")
source=(
	"http://download.jetbrains.com/webide/PhpStorm-$pkgver.tar.gz"
	"jetbrains-phpstorm.desktop"
)
sha512sums=(
	"fa681f4f2cdeb546d7b1301ee57acb5cec66231e01921b6ef3d89c05f0ba1a50887bf56db523191a87e938b8d206860a363aa8ab1d2845a2400a17fdb8f1eb9c"
	"ecd38ba61292bcee49790559ba3156310d455896d067aea97d9e12e4aa518c7d1f131f98895124839f867be90fdd77ee64dcb07a8bc444b6add45ea0800e38aa"
)

package() {
	local build=163.7743.50

	install --directory --mode=755 $pkgdir/opt/phpstorm
	install --directory --mode=755 $pkgdir/usr/bin
	install --directory --mode=755 $pkgdir/usr/share/applications/
	install --directory --mode=755 $pkgdir/usr/share/pixmaps/

	cp -rf $srcdir/PhpStorm-$build/* $pkgdir/opt/phpstorm

	ln -s /opt/phpstorm/bin/phpstorm.sh $pkgdir/usr/bin/phpstorm

	install -D --mode=644 $srcdir/jetbrains-phpstorm.desktop $pkgdir/usr/share/applications/
	install -D --mode=644 $pkgdir/opt/phpstorm/bin/phpstorm.png $pkgdir/usr/share/pixmaps/phpstorm.png
}
