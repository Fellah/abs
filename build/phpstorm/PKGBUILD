pkgname=phpstorm
pkgver=2016.1
pkgrel=1
pkgdesc="PhpStorm"
arch=("i686" "x86_64")
options=(!strip)
url="http://www.jetbrains.com/phpstorm/"
license=(custom)
depends=("java-environment>=6" "bash")
source=(
	"http://download.jetbrains.com/webide/PhpStorm-$pkgver.tar.gz"
	"jetbrains-phpstorm.desktop"
)
sha256sums=(
	"48b3b1d4e4dec954bb224193aea367b6aa6893d286c0e022775e9f81527251ce"
	"9adde03eb5c794834bf8d8beedf6869a64f4e10f5f6a308c0ef1dd8d9e568393"
)

package() {
	local build=145.258.2

	install --directory --mode=755 $pkgdir/opt/phpstorm
	install --directory --mode=755 $pkgdir/usr/bin
	install --directory --mode=755 $pkgdir/usr/share/applications/
	install --directory --mode=755 $pkgdir/usr/share/pixmaps/

	cp -rf $srcdir/PhpStorm-$build/* $pkgdir/opt/phpstorm

	ln -s /opt/phpstorm/bin/phpstorm.sh $pkgdir/usr/bin/phpstorm

	install -D --mode=644 $srcdir/jetbrains-phpstorm.desktop $pkgdir/usr/share/applications/

	install -D --mode=644 $pkgdir/opt/phpstorm/bin/webide.png $pkgdir/usr/share/pixmaps/phpstorm.png
}