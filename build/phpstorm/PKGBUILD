pkgname=phpstorm
pkgver=2016.2.2
pkgrel=1
pkgdesc="PhpStorm"
arch=("i686" "x86_64")
backup=("opt/phpstorm/bin/idea.properties")
options=(!strip)
url="http://www.jetbrains.com/phpstorm/"
license=(custom)
depends=("java-environment>=8" "java-runtime-common")
source=(
	"http://download.jetbrains.com/webide/PhpStorm-$pkgver.tar.gz"
	"jetbrains-phpstorm.desktop"
)
sha512sums=(
	"33561abcf4e922b1186c23e995bad7649d78a1d31d5bd850a6ea0f09f928b991e59b91544a14b25e9139c086382ac8d9e98856ccc402a1c68cdc7d53c2e26d3a"
	"7749436302e94ed99253684cab973ce4e519e056abf9eb5407528f86b3638c23a4e22240f18045d328ecabf29a3f9d05141409a9affebf656c166a2a9de6abbe"
)

package() {
	local build=162.2380.11

	install --directory --mode=755 $pkgdir/opt/phpstorm
	install --directory --mode=755 $pkgdir/usr/bin
	install --directory --mode=755 $pkgdir/usr/share/applications/
	install --directory --mode=755 $pkgdir/usr/share/pixmaps/

	cp -rf $srcdir/PhpStorm-$build/* $pkgdir/opt/phpstorm

	ln -s /opt/phpstorm/bin/phpstorm.sh $pkgdir/usr/bin/phpstorm

	install -D --mode=644 $srcdir/jetbrains-phpstorm.desktop $pkgdir/usr/share/applications/
	install -D --mode=644 $pkgdir/opt/phpstorm/bin/webide.png $pkgdir/usr/share/pixmaps/phpstorm.png
}
