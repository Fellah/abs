pkgname=phpstorm
pkgver=2016.3.1
pkgrel=1
pkgdesc="PhpStorm"
arch=("i686" "x86_64")
backup=("opt/phpstorm/bin/idea.properties")
options=(!strip)
url="http://www.jetbrains.com/phpstorm/"
license=(custom)
depends=("java-environment>=8" "java-runtime-common")
source=(
	"http://download.jetbrains.com/webide/PhpStorm-$pkgver.tar.gz"
	"jetbrains-phpstorm.desktop"
)
sha512sums=(
	"1c41d5bf815c538be82defaaa07d99e8b20fe7731337eb4b032082f7f6a60c8ecf97c23ced451a30cde7b7176a599a89bedab3f9f2d044f0f1cacd61b4a1136c"
	"ecd38ba61292bcee49790559ba3156310d455896d067aea97d9e12e4aa518c7d1f131f98895124839f867be90fdd77ee64dcb07a8bc444b6add45ea0800e38aa"
)

package() {
	local build=163.7743.50

	install --directory --mode=755 $pkgdir/opt/phpstorm
	install --directory --mode=755 $pkgdir/usr/bin
	install --directory --mode=755 $pkgdir/usr/share/applications/
	install --directory --mode=755 $pkgdir/usr/share/pixmaps/

	cp -rf $srcdir/PhpStorm-$build/* $pkgdir/opt/phpstorm

	ln -s /opt/phpstorm/bin/phpstorm.sh $pkgdir/usr/bin/phpstorm

	install -D --mode=644 $srcdir/jetbrains-phpstorm.desktop $pkgdir/usr/share/applications/
	install -D --mode=644 $pkgdir/opt/phpstorm/bin/phpstorm.png $pkgdir/usr/share/pixmaps/phpstorm.png
}
